<!DOCTYPE html>
<html><head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <meta name="author" content="xor.cl" />
  
  
  <meta
    name="description"
    content="proyectos &amp;&amp; experimentos"
  />
  
  <title>xor.cl</title>
  <link
    href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css"
    rel="stylesheet"
  />
  <link rel='stylesheet' href='//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.css'>
  <style>
    nav a {
      font-family: "Hack", serif;
    }
    .hide {
      display: none;
    }
    p {
      margin: 2em 0;
    }
    ul {
      list-style: circle;
      padding: 0 0 0 2em;
    }
    ol {
      list-style: decimal;
      padding: 0 0 0 2em;
    }
    .active {
      background-color: #000;
      color: white;
    }
    .active:hover {
      color: white;
    }
    h2.w-full {
      background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0),rgba(0,0,0,0.4))
    }
  </style>
</head>
<body><header class="text-gray-700 body-font sticky top-0 bg-white z-10">
  <div
    class="container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center"
  >
    <a
      class="flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0"
      href="https://xor.cl"
    >
    <svg
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:cc="http://creativecommons.org/ns#"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:svg="http://www.w3.org/2000/svg"
    xmlns="http://www.w3.org/2000/svg"
    class="w-10 h-10"
    viewBox="-5 -10 70 70">
    <g transform="translate(-50.944176,-83.624869)">
      <path
         transform="matrix(0.26458333,0,0,0.26458333,59.630984,82.609427)"
         d="M 43.019531,3.8378906 A 75.85101,75.85101 0 0 0 -32.832031,79.689453 75.85101,75.85101 0 0 0 43.019531,155.53906 75.85101,75.85101 0 0 0 80.978516,145.35742 75.85101,75.85101 0 0 1 43.085938,79.689453 75.85101,75.85101 0 0 1 80.978516,14.019531 75.85101,75.85101 0 0 0 43.019531,3.8378906 Z M 80.978516,14.019531 A 75.85101,75.85101 0 0 1 118.86914,79.689453 75.85101,75.85101 0 0 1 80.978516,145.35742 75.85101,75.85101 0 0 0 118.9375,155.53906 75.85101,75.85101 0 0 0 194.78906,79.689453 75.85101,75.85101 0 0 0 118.9375,3.8378906 75.85101,75.85101 0 0 0 80.978516,14.019531 Z"/>
    </g>  
 </svg>
      <span class="text-xl">.cl</span>
    </a>
    <nav
      class="md:ml-auto flex flex-wrap items-center text-base justify-center"
    >
      
      <a
        class="mr-2 px-2 rounded cursor-pointer select-none hover:text-gray-900 show-all"
        >Todos</a
      >
      
      <a
        class="mr-2 px-2 rounded cursor-pointer select-none hover:text-gray-900 filter-api"
        >API</a
      >
      
      <a
        class="mr-2 px-2 rounded cursor-pointer select-none hover:text-gray-900 filter-blog"
        >Blog</a
      >
      
      <a
        class="mr-2 px-2 rounded cursor-pointer select-none hover:text-gray-900 filter-concepto"
        >Concepto</a
      >
      
      <a
        class="mr-2 px-2 rounded cursor-pointer select-none hover:text-gray-900 filter-difusión"
        >Difusión</a
      >
      
      <a
        class="mr-2 px-2 rounded cursor-pointer select-none hover:text-gray-900 filter-telegram"
        >Telegram</a
      >
      
      
      <a
      href="/pages/acerca"
      class="mr-2 px-2 rounded cursor-pointer select-none hover:text-gray-900"
      >Acerca</a>
      
    </nav>
  </div>
</header>
<div id="content">

<section class="text-gray-700 body-font">
  <div class="container px-5 py-8 mx-auto">
    <h1 class="text-2xl font-bold my-4">API Red</h1>
    <div>
      <p>API con varios servicios relacionados con el sistema de transporte público de Santiago.</p>
<p>Su código fuente lo pueden encontrar <a href="https://github.com/xorcl/api-red">en este repositorio</a>, y se encuentra publicado bajo una licencia GPLv3.</p>
<h2 id="saldo-bip">Saldo Bip!</h2>
<p>Scrapping de la página <a href="https://cargatubip.metro.cl/CargaTuBipV2/">Carga Tu Bip!</a> de Metro de Santiago con el saldo actualizado.</p>
<p><strong>URL</strong>: GET <code>https://api.xor.cl/red/balance/&lt;id-tarjeta&gt;</code></p>
<p><strong>Parámetros</strong>: No tiene.</p>
<p><strong>Ejemplo</strong>: <a href="https://api.xor.cl/red/balance/87658765">https://api.xor.cl/red/balance/87658765</a></p>
<p><strong>Formato</strong></p>
<ul>
<li><code>raiz</code>
<ul>
<li><code>id</code>: <em>(string)</em> ID de la tarjeta. A pesar que actualmente los ID son solo numéricos, se prefirió dejar este campo como <em>string</em> por si en el futuro cambian este estándar.</li>
<li><code>status_code</code>: <em>(number)</em> ID de status de la respuesta. Revisr más abajo para ver todos los estados posibles.</li>
<li><code>status_description</code>: <em>(string)</em> Descripción del <code>status_code</code> en español.</li>
<li><code>balance</code>: <em>(number)</em> Saldo de la tarjeta.</li>
</ul>
</li>
</ul>
<h3 id="códigos-de-estado">Códigos de Estado</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Errors</span> = <span style="color:#66d9ef">map</span>[<span style="color:#a6e22e">ErrorCode</span>]<span style="color:#66d9ef">string</span>{
	<span style="color:#ae81ff">0</span>:  <span style="color:#e6db74">&#34;Saldo obtenido satisfactoriamente&#34;</span>,
	<span style="color:#ae81ff">10</span>: <span style="color:#e6db74">&#34;Error indeterminado al interpretar parámetro Bip ID&#34;</span>,
	<span style="color:#ae81ff">11</span>: <span style="color:#e6db74">&#34;Parámetro Bip ID faltante&#34;</span>,
	<span style="color:#ae81ff">12</span>: <span style="color:#e6db74">&#34;Parámetro Bip ID mal formado&#34;</span>,
	<span style="color:#ae81ff">20</span>: <span style="color:#e6db74">&#34;Error indeterminado al parsear información desde RedBip&#34;</span>,
	<span style="color:#ae81ff">21</span>: <span style="color:#e6db74">&#34;RedBip no contesta&#34;</span>,
	<span style="color:#ae81ff">22</span>: <span style="color:#e6db74">&#34;RedBip contesta, pero no entrega información interpretable&#34;</span>,
	<span style="color:#ae81ff">23</span>: <span style="color:#e6db74">&#34;Imposible interpretar valor de saldo&#34;</span>,
}
</code></pre></div><h2 id="estado-red-metro">Estado Red Metro</h2>
<p>Scrapping de la página <a href="">Estado de la Red</a> de Metro de Santiago con el estado en tiempo real de cada estación.</p>
<p><strong>URL</strong>: GET <code>https://api.xor.cl/red/metro-network</code></p>
<p><strong>Parámetros</strong>: No tiene.</p>
<p><strong>Ejemplo</strong>: <a href="https://api.xor.cl/red/metro-network">https://api.xor.cl/red/metro-network</a></p>
<p><strong>Formato</strong></p>
<ul>
<li><code>raiz</code>:
<ul>
<li><code>api_status</code>: <em>(string)</em> Es OK si la API está funcionando.</li>
<li><code>issues</code>: <em>(boolean)</em> Es <code>true</code> si el campo <code>issues</code> de algúna línea es <code>true</code>. En caso contrario, es <code>false</code>.</li>
<li><code>lines</code>: <em>(list)</em> Recopila la lista de líneas publicadas. Una línea posee los siguientes campos:
<ul>
<li><code>name</code>: <em>(string)</em> Nombre en español de la línea.</li>
<li><code>id</code>: <em>(string)</em> Código de la línea. Compuesto por una L y el número de la línea.</li>
<li><code>issues</code>: <em>(boolean)</em> Es <code>true</code> si el campo <code>issues</code> de algúna estación es <code>true</code>. En caso contrario, es <code>false</code>.</li>
<li><code>stations</code>: <em>(list)</em> Recopila la lista de estaciones de la línea. Una estación posee los siguientes campos:
<ul>
<li><code>name</code>: <em>(string)</em> Nombre en español de la estación.</li>
<li><code>id</code>: <em>(string)</em> Código de la estación. Versión en minúscula y sin espacios ni tildes del nombre de la estación.</li>
<li><code>status</code>: <em>(string)</em> Define el estado de la estación. Los códigos se definen más abajo.</li>
<li><code>lines</code>: <em>(list)</em> Lista de IDs de líneas a las cuales está conectada esta estación.</li>
<li><code>description</code> <em>(string)</em> Descripción del estado de la línea.</li>
<li><code>reason</code> <em>(string)</em> Cuando <code>status</code> es distinto de cero, da más detalles sobre el estado de la línea.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="códigos-de-estado-1">Códigos de estado</h3>
<ul>
<li><code>0</code>: Estación operativa</li>
<li><code>1</code>: Estación temporalmente cerrada</li>
<li><code>2</code>: Estación no habilitada</li>
<li><code>3</code>: Estación con accesos cerrados</li>
</ul>
<h2 id="paraderos">Paraderos</h2>
<p>Scrapping de la página <a href="http://m.ibus.cl">m.ibus.cl</a>, que entrega en JSON el tiempo de llegada de los buses de Transantiago a un paradero.</p>
<p><strong>URL</strong>: GET <code>https://api.xor.cl/red/bus-stop/&lt;paradero&gt;</code></p>
<p><strong>Parámetros</strong>:</p>
<ul>
<li><code>paradero</code>: Recibe el código de un paradero.</li>
</ul>
<p><strong>Ejemplo</strong>: <a href="https://api.xor.cl/red/bus-stop/PA433">https://api.xor.cl/red/bus-stop/PA433</a></p>
<p><strong>Formato</strong>:</p>
<ul>
<li><code>raíz</code>
<ul>
<li><code>id</code>: <em>(string)</em> ID de paradero entregado si es que este es válido. Si no, es un string vacío.</li>
<li><code>descripcion</code>: <em>(string)</em> Nombre de paradero. Si el ID es inválido, es un string vacío.</li>
<li><code>status_code</code>: <em>(number)</em> Código de status. Más abajo se detallan los valores posibles.</li>
<li><code>status_description</code>: <em>(string)</em> Explicación del código de status.</li>
<li><code>services</code>: <em>(list)</em> Lista con los recorridos que pasan por el paradero. Cada servicio tiene la siguiente estructura:
<ul>
<li><code>id</code>: <em>(string)</em> Identificador del recorrido.</li>
<li><code>valid</code>: <em>(boolean)</em> Es <code>true</code> si hay al menos un bus publicado en el itinerario para ese recorrido (es decir, si al menos un bus viene cerca).</li>
<li><code>status_description</code>: <em>(string)</em> Descripción del status del paradero en español.</li>
<li><code>buses</code>: Lista con los buses próximos a pasar del recorrido. Los campos de cada bus son:
<ul>
<li><code>id</code>: Patente del bus.</li>
<li><code>meters_distance</code>: Distancia del bus en metros.</li>
<li><code>min_arrival_time</code>: Cuántos minutos mínimo faltan para que el bus pase. Si el texto entregado por el iBus es &ldquo;menos de x minutos&rdquo;, este valor se configura en <code>0</code>.</li>
<li><code>max_arrival_time</code>: Cuántos minutos máximo faltan para que el bus pase. Si el texto entregado por iBus es &ldquo;más de x minutos&rdquo;, este valor se configura en <code>60</code>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="códigos-de-estado-2">Códigos de Estado</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Errors</span> = <span style="color:#66d9ef">map</span>[<span style="color:#a6e22e">ErrorCode</span>]<span style="color:#66d9ef">string</span>{
	<span style="color:#ae81ff">0</span>:  <span style="color:#e6db74">&#34;Itinerario obtenido satisfactoriamente&#34;</span>,
	<span style="color:#ae81ff">10</span>: <span style="color:#e6db74">&#34;Error indeterminado al interpretar parámetro ID de Parada&#34;</span>,
	<span style="color:#ae81ff">11</span>: <span style="color:#e6db74">&#34;Parámetro ID de Parada faltante&#34;</span>,
	<span style="color:#ae81ff">12</span>: <span style="color:#e6db74">&#34;Parámetro ID de Parada mal formado&#34;</span>,
	<span style="color:#ae81ff">20</span>: <span style="color:#e6db74">&#34;Error indeterminado al parsear información desde SMSBus&#34;</span>,
	<span style="color:#ae81ff">21</span>: <span style="color:#e6db74">&#34;SMSBus no contesta&#34;</span>,
	<span style="color:#ae81ff">22</span>: <span style="color:#e6db74">&#34;SMSBus contesta, pero no entrega información interpretable&#34;</span>,
	<span style="color:#ae81ff">23</span>: <span style="color:#e6db74">&#34;Imposible interpretar valores de itinerario&#34;</span>,
	<span style="color:#ae81ff">30</span>: <span style="color:#e6db74">&#34;Error indeterminado con paradero&#34;</span>,
}
</code></pre></div>
    </div>
  </div>
</section>


        </div><footer class="text-gray-700 body-font">
  <div
    class="container px-5 py-8 mx-auto flex items-center sm:flex-row flex-col"
  >
    <p
      class="text-sm text-gray-500 sm:ml-4 sm:pl-4 sm:border-l-1 sm:border-gray-200 sm:py-2 sm:mt-0 mt-4"
    >
      <a href="https://xor.cl">xor.cl | proyectos &amp;&amp; experimentos</a>
    </p>
    <span
      class="inline-flex sm:ml-auto sm:mt-0 mt-4 justify-center sm:justify-start"
    >
       
      <a class="ml-3 text-gray-500" href="https://twitter.com/xor_cl">
        <svg
          fill="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          class="w-5 h-5"
          viewBox="0 0 24 24"
        >
          <path
            d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"
          ></path>
        </svg>
      </a>
       
      <a class="ml-3 text-gray-500" href="https://instagram.com/xor_cl">
        <svg
          fill="none"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          class="w-5 h-5"
          viewBox="0 0 24 24"
        >
          <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
          <path
            d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37zm1.5-4.87h.01"
          ></path>
        </svg>
      </a>
        
      <a class="ml-3 text-gray-500" href="https://t.me/xor_cl">
        <svg           
        fill="currentColor"
        stroke="currentColor"
        xml:space="preserve"
        y="0px"
        x="0px"
        version="1.1"
        class="w-5 h-5"
        viewBox="10 10 50 50"
        class="sign-logo">
        <g>
          <path
          d="M14.4,34.3c0,0,17.3-7.1,23.3-9.6c2.3-1,10.1-4.2,10.1-4.2s3.6-1.4,3.3,2c-0.1,1.4-0.9,6.3-1.7,11.6
            c-1.2,7.5-2.5,15.7-2.5,15.7s-0.2,2.3-1.9,2.7c-1.7,0.4-4.5-1.4-5-1.8c-0.4-0.3-7.5-4.8-10.1-7c-0.7-0.6-1.5-1.8,0.1-3.2
            c3.6-3.3,7.9-7.4,10.5-10c1.2-1.2,2.4-4-2.6-0.6c-7.1,4.9-14.1,9.5-14.1,9.5s-1.6,1-4.6,0.1c-3-0.9-6.5-2.1-6.5-2.1
            S10.3,35.9,14.4,34.3z"
          class="st1" />
        </g>
        </svg>
      </a>
      
    </span>
  </div>
</footer>

<script>
  const allTypes = ["all",  "api","blog","concepto","difusión","page","telegram",];
  const filter = (event, type) => {
    const isActive = event.target.classList.contains("active");

    showAll();
    if (!isActive) {
      hideAll();
      event.target.classList.add("active");
      if (type !== "other") {
        document
          .querySelectorAll(`.${type}`)
          .forEach((item) => item.classList.remove("hide"));
      } else {
        document
          .querySelectorAll(
            `.card${specificTypes.map((type) => `:not(.${type})`).join("")}`
          )
          .forEach((item) => item.classList.remove("hide"));
      }
    }
  };

  const showAll = () => {
    allTypes.forEach((type) => {
      document
        .querySelectorAll(`.${type}`)
        .forEach((item) => item.classList.remove("hide"));
      document
        .querySelectorAll(`.filter-${type}`)
        .forEach((filterItem) => filterItem.classList.remove("active"));
    });
  };

  const hideAll = () => {
    allTypes.forEach((type) => {
      document
        .querySelectorAll(`.container a.card`)
        .forEach((item) => item.classList.add("hide"));
    });
  };

  allTypes.forEach((type) => {
    document
      .querySelectorAll(`.filter-${type}`)
      .forEach((filterItem) =>
        filterItem.addEventListener("click", (event) => filter(event, type))
      );
  });

  const showAllButton = document.querySelector(`.show-all`)
  if(showAllButton) showAllButton.addEventListener("click", showAll);
</script>
</body>
</html>
